echo "ğŸ” Running linter and formatter..."

# lint-stagedã‚’å®Ÿè¡Œã—ã€çµ‚äº†ã‚³ãƒ¼ãƒ‰ã‚’ä¿å­˜
lint-staged
EXIT_CODE=$?

# lint-stagedãŒã‚¨ãƒ©ãƒ¼ã‚’è¿”ã—ãŸå ´åˆï¼ˆçµ‚äº†ã‚³ãƒ¼ãƒ‰ãŒ0ä»¥å¤–ï¼‰
if [ $EXIT_CODE -ne 0 ]; then
    echo "âŒ Pre-commit hook failed! Please fix the issues above and try again."
    echo "ğŸ’¡ You can run 'npm run lint:fix' to automatically fix some issues."
    exit 1
fi

# lint-stagedã§ä¿®æ­£ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
if git diff --cached --quiet; then
    echo "âœ¨ No files were modified by lint-staged"
else
    echo "ğŸ“ Files were modified by lint-staged, adding them to staging..."
    git add -A
    echo "âœ… Modified files have been re-staged"
fi

echo "âœ¨ Pre-commit hook completed successfully!"
